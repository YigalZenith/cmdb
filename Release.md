# Release Note

### cmdb-20181129.tar:
* 1.新增，虚拟机自动填充按钮
* 2.新增，提示是否已上线资源和配置文件
* 3.新增，采购表搜索框

### cmdb-20180907.tar:
* 1.优化，ztree折叠后清除叶子节点缓存
* 2.优化，项目发布页面点击上线按钮后改变按钮状态

### cmdb-20180830.tar:
* 1.优化，ztree单击主机后保持展开状态
* 2.新增，ztree kvm项目主机后面显示虚拟机数量
* 3.新增，单击叶子节点时标记为选中状态

### cmdb-20180828.tar:
* 1.优化，Server表新增sn和model字段,搜索条件添加这两个字段
* 2.优化, db_to_record方法新增对，主机类型和宿主机IP变化的判断
* 3.优化，host_add/host_edit/host_info_ajax/host_detail模板中显示字段顺序调整
* 4.优化，host_edit_batch方法中优化idc和create_time的判断逻辑BUG
* 5.新增功能，批量修改增加环境和设备型号菜单
* 6.新增功能，添加运维规范页面

### cmdb-20180827.tar:
* 1.新增功能,关联服务器表和采购表的IP
* 2.优化：采购表中多个IP和SN换行显示
* 3.优化：对采购表列表和修改页面的IP进行排序
* 4.优化：修改采购表和服务器表的时间字段为DateField
* 5.优化：时间控件由datetimepicker更换为laydate
* 6.优化：采购表按时间排序,去掉id列，调整列宽比例

### cmdb-20180815.tar:
* 1.解决cms上线BUG(online_command函数和OnlineLog表中command字段的长度)

### cmdb-20180801.tar:
* 1.优化cms上线结果的输出内容
* 2.优化了项目上线日志为实际执行的命令
* 3.删除了两个旧文件
* 4.修复了项目发布页面,按项目筛选后结果单击下一页显示全部结果的bug
* 注：带筛选功能(只能按项目名和机器类型筛选)的分页，具体代码参考host_list和project_deploy函数

### cmdb-20180705.tar:
* 1.优化ztree统计项目主机数量的bug,初始展开tadu环境
* 2.调整分页数
* 3.修复单机下一页时，所选项目不生效BUG

### cmdb-20180704.tar:
* 1.优化了项目发布日志区分成功和失败
* 2.通过nav.html模板,区分普通用户和管理员用户所看到的页面
* 3.普通用户屏蔽批量上线和批量执行命令按钮
* 4.ztree初始化改成折叠状态,新增项目主机统计
* 5.saltapi的调用链接改为域名,保持测试和生产环境一致

### cmdb-20180702.tar:
* 1.修复了执行命令的BUG
* 2.新增了上线记录结果的功能(onlinelog表新增了result字段)

### cmdb-20180508.tar:
* 1.新增了ztree点击主机跳转到ztree_host_detail.html页面
* 2.修正了README.md的格式,并移除release.txt
* 3.自动化运维下新增了salt推送大功能,和执行命令小功能

### cmdb-20180507.tar:
* 1.修复了cms项目发布页执行命令会走上线逻辑的BUG
* 2.修复了单击ztree父节点会报错的BUG
* 3.首页新增了当天项目发布统计功能

### cmdb-20180428.tar:
* 1.完善了几个前段展示，首页swan日志/用户管理/日志审计等页面
* 2.完善了第2步,主机详情页展示的是unicode字符串而不是列表问题

### cmdb-20180428.tar:
* 1.修复了主机详情页type值为0的bug
* 2.修复了hostrecord表中显示unicode的问题（临时解决使用json字符串,后续完善方案把server表的verbose_name都改为英文)
* 3.添加了项目记录和项目发布页面按钮的日志记录功能,新增swan模块两张表

### cmdb-20180427.tar:
* 1.修复了主机列表和项目发布页面搜索功能的iframe失效问题
* 2.增加了auditlog表
* 3.增加了项目记录4个按钮和项目发布页1个上线按钮的日志记录功能

### cmdb-20180426.tar:
* 1.添加了ztree展示功能，以及单机主机跳转到主机详情功能
* 2.Server表添加了env字段，目前只在ztree和主机列表中使用（以后会应用到项目记录和项目发布页面）
* 3.优化了主机列表页和项目发布页的搜索功能的冗余代码
* 4.项目记录页面的上传按钮改成了添加，更新改成了上传

### cmdb-20180424.tar:
* 1.修复了采购表添加的BUG
* 2.添加了项目上传，按项目区分上传位置的功能
* 3.添加了项目发布上线，按上线的主机名区分调用不同的salt-api命令的功能

### cmdb-20171225.tar:
* 1.dashboard第一版
* 2.修复了s_url重复传递page的BUG
* 3.添加了执行命令功能
* 4.添加了批量上线的功能

### cmdb-20171219.tar:
* 1.修复了项目历史中分页的BUG
* 2.添加了采购表分页功能
* 3.修改project_history_filter.html冗余代码

### cmdb-20171214.tar:
* 1.修复了项目上传的BUG

### cmdb-20171213.tar:
* 1.采购表增加了设备类型字段
* 2.主机表修改SN字段为设备类型
* 3.添加了搜索设备类型的功能

### cmdb-20171212.tar:
* 1.添加了 主机时间日历功能
* 2.添加了 项目回退功能
* 3.添加了 项目过滤功能

### cmdb-20171209.tar:
* 1.添加了项目上线和实时日志功能






















